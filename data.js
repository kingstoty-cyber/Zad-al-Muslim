// ========== البيانات الأساسية ==========

// قائمة التذكيرات الذكية
const SmartReminders = [
    "صلِّ على النبي ﷺ",
    "استغفر الله العظيم وأتوب إليه",
    "سبحان الله وبحمده، سبحان الله العظيم",
    "لا حول ولا قوة إلا بالله العلي العظيم",
    "اذكر الله يذكرك، واشكره على نعمه يزدك",
    "هل قرأت وردك من القرآن اليوم؟",
    "صلاة الضحى صلاة الأوابين.. لا تحرم نفسك أجرها",
    "اللهم إني فوضت أمري إليك",
    "لا إله إلا أنت سبحانك إني كنت من الظالمين",
    "يا حي يا قيوم برحمتك أستغيث",
    "اللهم أعني على ذكرك وشكرك وحسن عبادتك",
    "اجعل لنفسك خبيئة من عمل صالح",
    "الصلاة خير من النوم.. صلاة الفجر نور يومك",
    "ركعتا الفجر خير من الدنيا وما فيها",
    "من لزم الاستغفار جعل الله له من كل هم فرجاً",
    "اللهم اكفني بحلالك عن حرامك",
    "رضيت بالله رباً وبالإسلام ديناً وبمحمد ﷺ نبياً",
    "اللهم إنك عفو كريم تحب العفو فاعفُ عني",
    "لا إله إلا الله وحده لا شريك له",
    "كن في الدنيا كأنك غريب أو عابر سبيل",
    "كلمتان خفيفتان على اللسان ثقيلتان في الميزان: سبحان الله وبحمده",
    "الكلمة الطيبة صدقة",
    "ابتسامتك في وجه أخيك صدقة",
    "اللهم آتنا في الدنيا حسنة وفي الآخرة حسنة",
    "رب اجعلني مقيم الصلاة ومن ذريتي",
    "حسبنا الله ونعم الوكيل",
    "يا مقلب القلوب ثبت قلبي على دينك",
    "اللهم أحسن عاقبتنا في الأمور كلها",
    "من قرأ سورة الملك قبل النوم وقته من عذاب القبر",
    "أحب الكلام إلى الله أربع: سبحان الله، والحمد لله، ولا إله إلا الله، والله أكبر",
    "اللهم بارك لنا في أوقاتنا وأعمالنا",
    "الزم شكر الله على أصغر النعم",
    "الحمد لله حمداً كثيراً طيباً مباركاً فيه",
    "من سلك طريقاً يلتمس فيه علماً سهل الله له به طريقاً إلى الجنة",
    "اللهم اغفر لي ولوالدي وللمؤمنين والمؤمنات",
    "ربِّ اغفر لي وتب عليّ إنك أنت التواب الرحيم",
    "يا رب توفيقك يرافق خطاي",
    "ما من يوم ينشق فجره إلا وينادي: يا ابن آدم أنا خلق جديد وعلى عملك شهيد",
    "الصلوات الخمس كفارات لما بينهن",
    "اللهم نسألك حسن الخاتمة",
    "طوبى لمن وجد في صحيفته استغفاراً كثيراً",
    "ما نقصت صدقة من مال",
    "اللهم حبب إلينا الإيمان وزينه في قلوبنا",
    "اللهم انفعنا بما علمتنا وعلمنا ما ينفعنا",
    "اللهم ارزقنا عيش السعداء وموت الشهداء",
    "لا تنسَ قراءة سورة الكهف في يوم الجمعة",
    "من صلى عليّ واحدة صلى الله عليه بها عشراً",
    "اللهم اجعل القرآن ربيع قلوبنا",
    "الباقيات الصالحات: سبحان الله والحمد لله ولا إله إلا الله والله أكبر",
    "أجمل ما يقال كل يوم: استودعت الله نفسي وديني وأهلي"
];

// قاعدة بيانات الأذكار الموسعة
const AdhkarDB = {
    morning: [
        { id: 1, text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ", count: 1, reference: "رواه مسلم", times: "مرة واحدة" },
        { id: 2, text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُورُ", count: 1, reference: "رواه الترمذي", times: "مرة واحدة" },
        { id: 3, text: "اللَّهُمَّ إِنِّي أَصْبَحْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَٰهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ", count: 4, reference: "رواه أبو داود", times: "أربع مرات" },
        { id: 4, text: "اللَّهُمَّ مَا أَصْبَحَ بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ، فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ", count: 1, reference: "رواه أبو داود", times: "مرة واحدة" },
        { id: 5, text: "حَسْبِيَ اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ", count: 7, reference: "رواه أبو داود", times: "سبع مرات" }
    ],
    evening: [
        { id: 11, text: "أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ", count: 1, reference: "رواه مسلم", times: "مرة واحدة" },
        { id: 12, text: "اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ", count: 1, reference: "رواه الترمذي", times: "مرة واحدة" },
        { id: 13, text: "اللَّهُمَّ إِنِّي أَمْسَيْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَٰهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ", count: 4, reference: "رواه أبو داود", times: "أربع مرات" },
        { id: 14, text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ", count: 3, reference: "رواه مسلم", times: "ثلاث مرات" },
        { id: 15, text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ عَفْوَ وَعَافِيَةً فِي دِينِي وَدُنْيَايَ وَأَهْلِي وَمَالِي", count: 1, reference: "رواه أبو داود", times: "مرة واحدة" }
    ],
    afterPrayer: [
        { id: 21, text: "أَسْتَغْفِرُ اللَّهَ (ثلاثاً) اللَّهُمَّ أَنْتَ السَّلَامُ وَمِنْكَ السَّلَامُ تَبَارَكْتَ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ", count: 1, reference: "رواه مسلم", times: "مرة واحدة" },
        { id: 22, text: "لَا إِلَٰهَ إِلَّا اللَّهُ وَحَدْهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ", count: 10, reference: "رواه مسلم", times: "عشر مرات" },
        { id: 23, text: "سُبْحَانَ اللَّهِ", count: 33, reference: "رواه البخاري", times: "ثلاث وثلاثون" },
        { id: 24, text: "الْحَمْدُ لِلَّهِ", count: 33, reference: "رواه البخاري", times: "ثلاث وثلاثون" },
        { id: 25, text: "اللَّهُ أَكْبَرُ", count: 34, reference: "رواه البخاري", times: "أربع وثلاثون" }
    ],
    sleeping: [
        { id: 31, text: "بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، إِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ", count: 1, reference: "رواه البخاري", times: "مرة واحدة" },
        { id: 32, text: "اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ", count: 3, reference: "رواه الترمذي", times: "ثلاث مرات" }
    ],
    wakingUp: [
        { id: 41, text: "الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا بَعْدَ مَا أَمَاتَنَا، وَإِلَيْهِ النُّشُورُ", count: 1, reference: "رواه البخاري", times: "مرة واحدة" },
        { id: 42, text: "لَا إِلَٰهَ إِلَّا اللَّهُ وَحَدْهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ، سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَٰهَ إِلَّا اللَّهُ، وَاللَّهُ أَكْبَرُ، وَلَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ", count: 10, reference: "رواه الترمذي", times: "عشر مرات" }
    ]
};

// آيات قرآنية
const QuranAyahs = [
    { text: "الَّذِينَ آمَنُوا وَتَطْمَئِنُّ قُلُوبُهُمْ بِذِكْرِ اللَّهِ أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ", reference: "الرعد: ٢٨" },
    { text: "إِنَّمَا يُوَفَّى الصَّابِرُونَ أَجْرَهُمْ بِغَيْرِ حِسَابٍ", reference: "الزمر: ١٠" },
    { text: "وَمَنْ يَتَّقِ اللَّهَ يَجْعَلْ لَهُ مَخْرَجًا * وَيَرْزُقْهُ مِنْ حَيْثُ لَا يَحْتَسِبُ", reference: "الطلاق: ٢-٣" },
    { text: "رَبِّ اشْرَحْ لِي صَدْرِي * وَيَسِّرْ لِي أَمْرِي", reference: "طه: ٢٥-٢٦" },
    { text: "إِنَّ مَعَ الْعُسْرِ يُسْرًا * إِنَّ مَعَ الْعُسْرِ يُسْرًا", reference: "الشرح: ٥-٦" }
];

// قائمة المسبحة
const TasbeehList = [
    { text: "سبحان الله", target: 33 },
    { text: "الحمد لله", target: 33 },
    { text: "الله أكبر", target: 34 },
    { text: "لا إله إلا الله", target: 100 },
    { text: "أستغفر الله", target: 100 },
    { text: "سبحان الله وبحمده", target: 100 },
    { text: "سبحان الله العظيم", target: 100 },
    { text: "لا حول ولا قوة إلا بالله", target: 100 },
    { text: "حسبي الله ونعم الوكيل", target: 100 },
    { text: "اللهم صل على محمد", target: 100 }
];

// السمات المتاحة
const Themes = [
    // السمات الليلية
    { id: "default", name: "ذهبي ليلي", class: "" },
    { id: "blue", name: "أزرق ليلي", class: "theme-blue" },
    { id: "green", name: "أخضر ليلي", class: "theme-green" },
    { id: "purple", name: "أرجواني ليلي", class: "theme-purple" },
    { id: "orange", name: "برتقالي ليلي", class: "theme-orange" },
    
    // السمات النهارية
    { id: "gold-light", name: "ذهبي نهار", class: "theme-gold-light" },
    { id: "blue-light", name: "أزرق نهار", class: "theme-blue-light" },
    { id: "green-light", name: "أخضر نهار", class: "theme-green-light" },
    { id: "purple-light", name: "أرجواني نهار", class: "theme-purple-light" },
    { id: "orange-light", name: "برتقالي نهار", class: "theme-orange-light" }
];

// الصلوات (إزالة القيم الثابتة وتحديثها لحين جلب القيم الحقيقية)
const Prayers = [
    { name: "الفجر", time: "04:30", index: 0 },
    { name: "الشروق", time: "05:50", index: 1 },
    { name: "الظهر", time: "12:00", index: 2 },
    { name: "العصر", time: "15:15", index: 3 },
    { name: "المغرب", time: "18:20", index: 4 },
    { name: "العشاء", time: "19:45", index: 5 }
];

// نظام الذاكرة المحلية
const Storage = {
    save(key, data) { 
        try {
            localStorage.setItem(key, JSON.stringify(data)); 
        } catch (e) {
            console.error('خطأ في حفظ البيانات:', e);
        }
    },
    load(key) { 
        try {
            return JSON.parse(localStorage.getItem(key)) || null; 
        } catch (e) {
            console.error('خطأ في تحميل البيانات:', e);
            return null;
        }
    }
};

// تهيئة الحالة العامة للتطبيق
let AppState = {
    currentTab: 'home',
    currentTheme: Storage.load('app_theme') || 'default',
    quranProgress: Storage.load('quran_v3') || [],
    prayerLog: Storage.load('prayer_v3') || { date: '', list: [] },
    adhkarHistory: Storage.load('adhkar_v3') || {},
    themeMode: Storage.load('theme_mode') || 'dark',
    autoTheme: Storage.load('auto_theme') || false
};