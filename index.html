<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø²Ø§Ø¯ Ø§Ù„Ù…Ø³Ù„Ù… v3.0</title>
    
    <!-- Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ© -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&family=Amiri&display=swap" rel="stylesheet">
    
    <!-- Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
    <style>
        /* ========== VARIABLES ========== */
        :root {
            --primary-color: #c5a059;
            --primary-dark: #8e6d2d;
            --secondary-color: #2ecc71;
            --accent-color: #3498db;
            --bg-color: #0a0b10;
            --card-bg: #16181d;
            --text-color: #e0e0e0;
            --soft-white: rgba(255, 255, 255, 0.05);
            --shadow: 0 10px 30px rgba(0,0,0,0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ========== THEMES ========== */
        .theme-blue {
            --primary-color: #3498db;
            --primary-dark: #1d6fa5;
            --bg-color: #0a1520;
            --card-bg: #16202d;
            --text-color: #e0f0ff;
        }

        .theme-green {
            --primary-color: #2ecc71;
            --primary-dark: #27ae60;
            --bg-color: #0a100b;
            --card-bg: #16201a;
            --text-color: #e0ffe7;
        }

        /* ========== BASE STYLES ========== */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: var(--transition);
        }

        /* ========== HEADER ========== */
        .header-section {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(to bottom, var(--card-bg), transparent);
            border-radius: 0 0 30px 30px;
            margin-bottom: 25px;
        }

        .header-section h1 {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            color: var(--primary-color);
            margin: 0;
        }

        /* ========== MAIN CONTENT ========== */
        .main-content {
            padding: 20px;
            padding-bottom: 90px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        /* ========== CARDS ========== */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--soft-white);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 4px; height: 100%;
            background: var(--primary-color);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
        }

        /* ========== NAVIGATION ========== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: var(--card-bg);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid var(--soft-white);
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #7f8c8d;
            text-decoration: none;
            font-size: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 0;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 4px;
        }

        /* ========== PRAYER TIMES ========== */
        .prayer-times {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .prayer-time {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
        }

        .prayer-time.current {
            background: var(--primary-color);
            color: #000;
            font-weight: bold;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ========== BUTTONS ========== */
        .btn-primary {
            background: linear-gradient(45deg, var(--primary-dark), var(--primary-color));
            border: none;
            color: #000;
            padding: 15px 30px;
            border-radius: 12px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            margin-bottom: 10px;
            transition: var(--transition);
        }

        .btn-primary:hover {
            transform: scale(1.02);
            filter: brightness(1.1);
        }

        /* ========== ANIMATIONS ========== */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .smart-reminder {
            animation: pulse 3s infinite ease-in-out;
            border-right: 5px solid var(--accent-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* ========== UTILITIES ========== */
        .progress-bar {
            height: 8px;
            background: var(--soft-white);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-dark), var(--primary-color));
            transition: width 0.5s ease;
        }

        input[type="checkbox"] {
            appearance: none;
            width: 25px;
            height: 25px;
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            cursor: pointer;
            position: relative;
        }

        input[type="checkbox"]:checked {
            background: var(--primary-color);
        }

        input[type="checkbox"]:checked::after {
            content: "âœ“";
            color: var(--bg-color);
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .location-update {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            text-align: center;
        }

        .location-update button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Tajawal';
            margin-right: 10px;
        }
    </style>
</head>
<body id="app-body">

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="header-section">
        <h1>Ø²Ø§Ø¯ Ø§Ù„Ù…Ø³Ù„Ù…</h1>
        <p id="current-date">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
        <div id="current-theme" style="font-size:0.9rem;color:var(--primary-color);margin-top:5px;"></div>
    </div>

    <main class="main-content">
        <div id="page-content">
            <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù‡Ù†Ø§ -->
        </div>
    </main>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="loadTab('home')">
            <i class="fas fa-home"></i>
            <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
        <div class="nav-item" onclick="loadTab('adhkar')">
            <i class="fas fa-bead-tree"></i>
            <span>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</span>
        </div>
        <div class="nav-item" onclick="loadTab('tasbeeh')">
            <i class="fas fa-circle-notch"></i>
            <span>Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</span>
        </div>
        <div class="nav-item" onclick="loadTab('settings')">
            <i class="fas fa-user-gear"></i>
            <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </div>
    </nav>

    <!-- JavaScript Code -->
    <script>
        // ========== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==========
        const SmartReminders = [
            "ØµÙ„Ù‘Ù Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·º",
            "Ø§Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡",
            "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
            "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
            "Ø§Ø°ÙƒØ± Ø§Ù„Ù„Ù‡ ÙŠØ°ÙƒØ±ÙƒØŒ ÙˆØ§Ø´ÙƒØ±Ù‡ Ø¹Ù„Ù‰ Ù†Ø¹Ù…Ù‡ ÙŠØ²Ø¯Ùƒ"
        ];

        const QuranAyahs = [
            { text: "Ø§Ù„Ù‘ÙØ°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙˆÙØªÙØ·Ù’Ù…ÙØ¦ÙÙ†Ù‘Ù Ù‚ÙÙ„ÙÙˆØ¨ÙÙ‡ÙÙ…Ù’ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†Ù‘Ù Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù", reference: "Ø§Ù„Ø±Ø¹Ø¯: Ù¢Ù¨" },
            { text: "Ø¥ÙÙ†Ù‘ÙÙ…ÙØ§ ÙŠÙÙˆÙÙÙ‘ÙÙ‰ Ø§Ù„ØµÙ‘ÙØ§Ø¨ÙØ±ÙÙˆÙ†Ù Ø£ÙØ¬Ù’Ø±ÙÙ‡ÙÙ…Ù’ Ø¨ÙØºÙÙŠÙ’Ø±Ù Ø­ÙØ³ÙØ§Ø¨Ù", reference: "Ø§Ù„Ø²Ù…Ø±: Ù¡Ù " }
        ];

        const PrayerTimes = [
            { name: "Ø§Ù„ÙØ¬Ø±", time: "04:30" },
            { name: "Ø§Ù„Ø´Ø±ÙˆÙ‚", time: "05:45" },
            { name: "Ø§Ù„Ø¸Ù‡Ø±", time: "12:15" },
            { name: "Ø§Ù„Ø¹ØµØ±", time: "15:45" },
            { name: "Ø§Ù„Ù…ØºØ±Ø¨", time: "18:30" },
            { name: "Ø§Ù„Ø¹Ø´Ø§Ø¡", time: "19:45" }
        ];

        // ========== Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ† ==========
        const Storage = {
            save(key, data) { 
                try {
                    localStorage.setItem(key, JSON.stringify(data)); 
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', e);
                }
            },
            load(key) { 
                try {
                    return JSON.parse(localStorage.getItem(key)) || null; 
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', e);
                    return null;
                }
            }
        };

        let AppState = {
            currentTab: 'home',
            currentTheme: Storage.load('app_theme') || 'default',
            prayerLog: Storage.load('prayer_v3') || { date: '', list: [false, false, false, false, false] },
            themeMode: Storage.load('theme_mode') || 'dark'
        };

        // ========== Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==========
        function getRandomReminder() {
            return SmartReminders[Math.floor(Math.random() * SmartReminders.length)];
        }

        function getArabicDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return now.toLocaleDateString('ar-SA', options);
        }

        function getRandomAyah() {
            return QuranAyahs[Math.floor(Math.random() * QuranAyahs.length)];
        }

        function getCurrentPrayer() {
            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();
            const prayerTimes = ["Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø´Ø±ÙˆÙ‚", "Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø¹Ø´Ø§Ø¡"];
            return prayerTimes[Math.floor(Math.random() * prayerTimes.length)];
        }

        // ========== ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³Ù…Ø© ==========
        function applyTheme(themeId = AppState.currentTheme) {
            const body = document.getElementById('app-body');
            body.className = themeId;
            AppState.currentTheme = themeId;
            Storage.save('app_theme', themeId);
            
            const themeNameDisplay = document.getElementById('current-theme');
            if (themeNameDisplay) {
                themeNameDisplay.textContent = `Ø§Ù„Ø³Ù…Ø©: ${themeId === 'default' ? 'Ø°Ù‡Ø¨ÙŠ Ù„ÙŠÙ„ÙŠ' : themeId}`;
            }
        }

        // ========== Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==========
        function renderHome() {
            const content = document.getElementById('page-content');
            content.className = 'fade-in';
            
            const today = new Date().toDateString();
            if (AppState.prayerLog.date !== today) {
                AppState.prayerLog = {
                    date: today,
                    list: [false, false, false, false, false]
                };
                Storage.save('prayer_v3', AppState.prayerLog);
            }
            
            const ayah = getRandomAyah();
            const reminder = getRandomReminder();
            const currentPrayer = getCurrentPrayer();
            
            content.innerHTML = `
                <div class="card smart-reminder">
                    <div class="card-title"><i class="fas fa-lightbulb"></i> ØªØ°ÙƒÙŠØ±Ø§Øª Ø°ÙƒÙŠØ©</div>
                    <div style="padding:15px;background:rgba(52,152,219,0.1);border-radius:10px;">
                        <i class="fas fa-quote-right" style="color:var(--accent-color);float:left;margin-left:10px;"></i>
                        <p style="font-size:1.1rem;line-height:1.6;margin:0;text-align:center;">${reminder}</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title"><i class="fas fa-clock"></i> Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</div>
                    <div class="prayer-times">
                        ${PrayerTimes.map(prayer => `
                            <div class="prayer-time ${prayer.name === currentPrayer ? 'current' : ''}">
                                <div class="name">${prayer.name}</div>
                                <div class="time">${prayer.time}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="location-update">
                        <i class="fas fa-info-circle"></i> Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${currentPrayer}
                        <button onclick="updateLocation()">
                            <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title"><i class="fas fa-calendar-check"></i> Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØµÙ„ÙˆØ§Øª</div>
                    ${['Ø§Ù„ÙØ¬Ø±', 'Ø§Ù„Ø¸Ù‡Ø±', 'Ø§Ù„Ø¹ØµØ±', 'Ø§Ù„Ù…ØºØ±Ø¨', 'Ø§Ù„Ø¹Ø´Ø§Ø¡'].map((prayer, index) => `
                        <div style="display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:1px solid var(--soft-white);">
                            <span>${prayer}</span>
                            <input type="checkbox" 
                                   ${AppState.prayerLog.list[index] ? 'checked' : ''}
                                   onchange="togglePrayer(${index})">
                        </div>
                    `).join('')}
                    <div class="progress-bar" style="margin-top:20px;">
                        <div class="progress-fill" style="width:${(AppState.prayerLog.list.filter(p => p).length / 5) * 100}%"></div>
                    </div>
                    <div style="text-align:center;margin-top:10px;font-size:0.9rem;">
                        ${AppState.prayerLog.list.filter(p => p).length} Ù…Ù† 5 ØµÙ„ÙˆØ§Øª
                    </div>
                </div>
                
                <div style="background:linear-gradient(135deg,var(--card-bg),color-mix(in srgb,var(--card-bg) 80%,#000));border-right:4px solid var(--accent-color);margin:15px 0;padding:15px;border-radius:12px;font-family:'Amiri',serif;font-size:1.2rem;line-height:1.8;text-align:center;">
                    <p style="font-family:'Amiri',serif;font-size:1.3rem;line-height:1.8;margin:0;">${ayah.text}</p>
                    <p style="margin:10px 0 0 0;color:var(--primary-color);font-size:0.9rem;">${ayah.reference}</p>
                </div>
            `;
        }

        function togglePrayer(index) {
            AppState.prayerLog.list[index] = !AppState.prayerLog.list[index];
            Storage.save('prayer_v3', AppState.prayerLog);
            renderHome();
        }

        function updateLocation() {
            alert('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹...');
            renderHome();
        }

        // ========== ØµÙØ­Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± ==========
        function renderAdhkar() {
            const content = document.getElementById('page-content');
            content.className = 'fade-in';
            
            content.innerHTML = `
                <div class="card">
                    <div class="card-title" style="justify-content:center;">
                        <i class="fas fa-bead-tree"></i> Ø§Ù„Ø£Ø°ÙƒØ§Ø±
                    </div>
                    
                    <div style="text-align:center;margin:20px 0;">
                        <div style="display:inline-flex;gap:15px;background:rgba(255,255,255,0.05);padding:10px 20px;border-radius:20px;">
                            <div>
                                <div style="font-size:1.2rem;color:var(--primary-color);">0</div>
                                <div style="font-size:0.7rem;">Ø£Ø°ÙƒØ§Ø± Ù…ÙƒØªÙ…Ù„Ø©</div>
                            </div>
                            <div style="border-left:1px solid var(--soft-white);padding-left:15px;">
                                <div style="font-size:1.2rem;color:var(--secondary-color);">15</div>
                                <div style="font-size:0.7rem;">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø°ÙƒØ§Ø±</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align:center;margin:30px 0;">
                        <p style="color:var(--accent-color);">ğŸš§ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸš§</p>
                        <p>Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                        <button class="btn-primary" onclick="loadTab('home')" style="margin-top:20px;">
                            <i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                    </div>
                </div>
            `;
        }

        // ========== ØµÙØ­Ø© Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ==========
        function renderTasbeeh() {
            const content = document.getElementById('page-content');
            content.className = 'fade-in';
            
            let count = Storage.load('tasbeeh_count') || 0;
            let totalCount = Storage.load('tasbeeh_total') || 0;
            
            content.innerHTML = `
                <div class="card" style="text-align:center;padding:20px;">
                    <div class="card-title" style="justify-content:center;">
                        <i class="fas fa-circle-notch"></i> Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©
                    </div>
                    
                    <div style="display:flex;justify-content:space-between;margin:20px 0;flex-wrap:wrap;">
                        <div style="text-align:center;flex:1;min-width:120px;">
                            <div style="font-size:2rem;color:var(--primary-color);">${count}</div>
                            <div style="font-size:0.8rem;">Ø¹Ø¯Ø¯ Ø§Ù„ØªØ³Ø¨ÙŠØ­Ø§Øª</div>
                        </div>
                        <div style="text-align:center;flex:1;min-width:120px;">
                            <div style="font-size:2rem;color:var(--secondary-color);">${totalCount}</div>
                            <div style="font-size:0.8rem;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                        </div>
                    </div>
                    
                    <div style="margin:30px 0;">
                        <button onclick="incrementTasbeeh()" style="width:180px;height:180px;border-radius:50%;border:10px solid var(--card-bg);background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#000;font-size:3.5rem;cursor:pointer;box-shadow:0 20px 40px rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;margin:0 auto;">
                            <i class="fas fa-hand-point-up"></i>
                        </button>
                        
                        <div style="margin-top:20px;font-size:0.9rem;color:var(--text-color);opacity:0.8;">
                            Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯
                        </div>
                    </div>
                    
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:20px;">
                        <button class="btn-primary" onclick="resetTasbeeh()" style="background:rgba(231,76,60,0.2);color:#e74c3c;">
                            <i class="fas fa-redo"></i> ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯
                        </button>
                        <button class="btn-primary" onclick="completeTasbeeh()" style="background:rgba(46,204,113,0.2);color:var(--secondary-color);">
                            <i class="fas fa-check"></i> Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø°ÙƒØ±
                        </button>
                    </div>
                </div>
            `;
        }

        function incrementTasbeeh() {
            let count = Storage.load('tasbeeh_count') || 0;
            let totalCount = Storage.load('tasbeeh_total') || 0;
            
            count++;
            totalCount++;
            
            Storage.save('tasbeeh_count', count);
            Storage.save('tasbeeh_total', totalCount);
            
            renderTasbeeh();
        }

        function resetTasbeeh() {
            if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØµÙÙŠØ± Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³Ø¨Ø­Ø©ØŸ")) {
                Storage.save('tasbeeh_count', 0);
                renderTasbeeh();
            }
        }

        function completeTasbeeh() {
            const count = Storage.load('tasbeeh_count') || 0;
            if (count > 0) {
                alert(`ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ${count} ØªØ³Ø¨ÙŠØ­Ø©`);
                Storage.save('tasbeeh_count', 0);
                renderTasbeeh();
            }
        }

        // ========== ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ==========
        function renderSettings() {
            const content = document.getElementById('page-content');
            content.className = 'fade-in';
            
            const themeMode = Storage.load('theme_mode') || 'dark';
            const totalPrayers = (AppState.prayerLog.list || []).filter(p => p).length;
            const tasbeehTotal = Storage.load('tasbeeh_total') || 0;
            
            content.innerHTML = `
                <div class="card">
                    <div class="card-title"><i class="fas fa-chart-line"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ</div>
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin:15px 0;">
                        <div style="background:rgba(46,204,113,0.1);padding:15px;border-radius:10px;text-align:center;">
                            <div style="font-size:1.5rem;color:var(--secondary-color);">${totalPrayers}</div>
                            <div style="font-size:0.8rem;">ØµÙ„Ø§Ø© Ø§Ù„ÙŠÙˆÙ…</div>
                        </div>
                        <div style="background:rgba(52,152,219,0.1);padding:15px;border-radius:10px;text-align:center;">
                            <div style="font-size:1.5rem;color:var(--accent-color);">${tasbeehTotal}</div>
                            <div style="font-size:0.8rem;">ØªØ³Ø¨ÙŠØ­Ø©</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title"><i class="fas fa-adjust"></i> Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ / Ø§Ù„Ù„ÙŠÙ„ÙŠ</div>
                    
                    <div style="display:flex;gap:15px;margin:20px 0;">
                        <div onclick="changeTheme('gold-light')" 
                             style="flex:1;text-align:center;padding:20px;border-radius:10px;cursor:pointer;background:${themeMode === 'light' ? 'var(--primary-color)' : 'rgba(255,255,255,0.05)'};color:${themeMode === 'light' ? '#000' : 'var(--text-color)'};border:2px solid ${themeMode === 'light' ? 'var(--primary-color)' : 'transparent'};">
                            <i class="fas fa-sun fa-2x"></i>
                            <div style="margin-top:10px;font-weight:bold;">Ù†Ù‡Ø§Ø±ÙŠ</div>
                            <div style="font-size:0.8rem;opacity:0.8;">ÙØ§ØªØ­ ÙˆØ³Ù‡Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
                        </div>
                        
                        <div onclick="changeTheme('default')" 
                             style="flex:1;text-align:center;padding:20px;border-radius:10px;cursor:pointer;background:${themeMode === 'dark' ? 'var(--primary-color)' : 'rgba(255,255,255,0.05)'};color:${themeMode === 'dark' ? '#000' : 'var(--text-color)'};border:2px solid ${themeMode === 'dark' ? 'var(--primary-color)' : 'transparent'};">
                            <i class="fas fa-moon fa-2x"></i>
                            <div style="margin-top:10px;font-weight:bold;">Ù„ÙŠÙ„ÙŠ</div>
                            <div style="font-size:0.8rem;opacity:0.8;">Ù…Ø±ÙŠØ­ Ù„Ù„Ø¹ÙŠÙ† ÙÙŠ Ø§Ù„Ù„ÙŠÙ„</div>
                        </div>
                    </div>
                    
                    <div style="display:flex;gap:10px;margin-top:20px;">
                        <button class="btn-primary" onclick="changeTheme('blue')" style="background:#3498db;color:white;">
                            <i class="fas fa-palette"></i> Ø£Ø²Ø±Ù‚
                        </button>
                        <button class="btn-primary" onclick="changeTheme('green')" style="background:#2ecc71;color:white;">
                            <i class="fas fa-palette"></i> Ø£Ø®Ø¶Ø±
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title"><i class="fas fa-gears"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªØ­ÙƒÙ…</div>
                    <button class="btn-primary" onclick="resetToday()">
                        <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙŠÙˆÙ…
                    </button>
                    <button class="btn-primary" style="background:var(--accent-color);" onclick="updateLocation()">
                        <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©
                    </button>
                    <button class="btn-primary" style="background:#e74c3c;" onclick="clearAllData()">
                        <i class="fas fa-trash"></i> Ø­Ø°Ù ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>

                <div class="card">
                    <div class="card-title"><i class="fas fa-circle-info"></i> Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</div>
                    <p>ØªØ·Ø¨ÙŠÙ‚ <span style="color:var(--primary-color)">Ø²Ø§Ø¯ Ø§Ù„Ù…Ø³Ù„Ù…</span> - Ø§Ù„Ø¥ØµØ¯Ø§Ø± 3.0</p>
                    <p style="font-size:0.9rem;line-height:1.6;">
                        ØªØ·Ø¨ÙŠÙ‚ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.<br>
                        ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª ÙˆÙŠØ­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ.
                    </p>
                </div>
            `;
        }

        function changeTheme(themeId) {
            applyTheme(themeId);
            Storage.save('theme_mode', themeId.includes('-light') ? 'light' : 'dark');
            if (AppState.currentTab === 'settings') {
                renderSettings();
            }
        }

        function resetToday() {
            if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙŠÙˆÙ…ØŸ")) {
                AppState.prayerLog.list = [false, false, false, false, false];
                Storage.save('prayer_v3', AppState.prayerLog);
                renderHome();
            }
        }

        function clearAllData() {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!")) {
                localStorage.clear();
                AppState = {
                    currentTab: 'home',
                    currentTheme: 'default',
                    prayerLog: { date: '', list: [false, false, false, false, false] },
                    themeMode: 'dark'
                };
                applyTheme('default');
                renderHome();
            }
        }

        // ========== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª ==========
        function loadTab(tabName) {
            AppState.currentTab = tabName;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø´Ø§Ø· ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.querySelector('span').textContent === 
                    (tabName === 'home' ? 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 
                     tabName === 'adhkar' ? 'Ø§Ù„Ø£Ø°ÙƒØ§Ø±' : 
                     tabName === 'tasbeeh' ? 'Ø§Ù„Ù…Ø³Ø¨Ø­Ø©' : 
                     tabName === 'settings' ? 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' : '')) {
                    item.classList.add('active');
                }
            });

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
            switch(tabName) {
                case 'home': renderHome(); break;
                case 'adhkar': renderAdhkar(); break;
                case 'tasbeeh': renderTasbeeh(); break;
                case 'settings': renderSettings(); break;
            }
            
            window.scrollTo(0, 0);
        }

        // ========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ==========
        window.onload = function() {
            // 1. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            applyTheme();
            
            // 2. Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ®
            document.getElementById('current-date').textContent = getArabicDate();
            
            // 3. ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            renderHome();
            
            // 4. ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            setInterval(() => {
                document.getElementById('current-date').textContent = getArabicDate();
            }, 60000);
            
            // 5. Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ù„Ù„Ø²Ø±
            document.getElementById('scrollTop')?.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        };

        // ØªØ¹Ø±ÙŠØ¶ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù…
        window.loadTab = loadTab;
        window.togglePrayer = togglePrayer;
        window.updateLocation = updateLocation;
        window.incrementTasbeeh = incrementTasbeeh;
        window.resetTasbeeh = resetTasbeeh;
        window.completeTasbeeh = completeTasbeeh;
        window.changeTheme = changeTheme;
        window.resetToday = resetToday;
        window.clearAllData = clearAllData;
    </script>
</body>
</html>